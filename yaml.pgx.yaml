---
+grammar: yaml
+toprule: yaml_stream
+version: 0.0.1
EOL:
  .rgx: \r?\n
block_key:
  .rgx: (?![&\*\{\}\[\]%"'`\@\#])(.+?)(?:\s+[\ \t]*\#.*)?(?=:\s|\r?\n|\z):(?:\ +|\
    *(?=\r?\n))
block_mapping:
  .all:
  - .ref: block_indent
  - .all:
    - .ref: block_mapping_pair
    - +min: 0
      -flat: 1
      .all:
      - +min: 0
        .all:
        - .ref: EOL
        - .ref: ignore_line
      - .ref: block_mapping_pair
    - +max: 1
      +min: 0
      .all:
      - .ref: EOL
      - .ref: ignore_line
  - .ref: block_undent
block_mapping_pair:
  .all:
  - .ref: block_ondent
  - .ref: block_key
  - .ref: yaml_node
block_plain_scalar:
  .rgx: (?![&\*\{\}\[\]%"'`\@\#])(.+?)(?:\s+[\ \t]*\#.*)?(?=:\s|\r?\n|\z)
block_scalar:
  .any:
  - .ref: literal_scalar
  - .ref: folded_scalar
  - .ref: double_quoted_scalar
  - .ref: single_quoted_scalar
  - .ref: block_plain_scalar
block_sequence:
  .all:
  - .ref: block_indent_sequence
  - +min: 1
    .ref: block_sequence_entry
  - .ref: block_undent
block_sequence_entry:
  .all:
  - .ref: block_ondent_sequence
  - .rgx: \-(?:\ +|\ *(?=\r?\n))
  - .ref: yaml_node
document_end:
  .rgx: ''
document_foot:
  .rgx: \.\.\.\r?\n
document_head:
  .rgx: \r?\n?\-\-\-(?:\ +|(?=\r?\n))
document_start:
  .rgx: (?=[\s\S]*[^\r?\n])
double_quoted_scalar:
  .rgx: '"((?:\\"|[^"])*)"'
flow_mapping:
  .all:
  - .ref: flow_mapping_start
  - +max: 1
    .all:
    - .ref: flow_mapping_pair
    - +min: 0
      -flat: 1
      .all:
      - .ref: list_separator
      - .ref: flow_mapping_pair
    - +max: 1
      .ref: list_separator
  - .ref: flow_mapping_end
flow_mapping_end:
  .rgx: \s*\}\ *
flow_mapping_pair:
  .all:
  - .ref: flow_node
  - .ref: flow_mapping_separator
  - .ref: flow_node
flow_mapping_separator:
  .rgx: \s*:(?:\ +|\ *(?=\r?\n))
flow_mapping_start:
  .rgx: \s*\{\s*
flow_node:
  .all:
  - +max: 1
    .ref: yaml_prefix
  - .any:
    - .ref: yaml_alias
    - .ref: flow_sequence
    - .ref: flow_mapping
    - .ref: flow_scalar
flow_plain_scalar:
  .rgx: (?![&\*\{\}\[\]%"'`\@\#])(.+?)(?=[&\*\{\}\[\]%"',]|:\ |,\ |\r?\n|\z)
flow_scalar:
  .any:
  - .ref: double_quoted_scalar
  - .ref: single_quoted_scalar
  - .ref: flow_plain_scalar
flow_sequence:
  .all:
  - .ref: flow_sequence_start
  - +max: 1
    .all:
    - .ref: flow_node
    - +min: 0
      -flat: 1
      .all:
      - .ref: list_separator
      - .ref: flow_node
    - +max: 1
      .ref: list_separator
  - .ref: flow_sequence_end
flow_sequence_end:
  .rgx: \s*\]\ *
flow_sequence_start:
  .rgx: \s*\[\s*
folded_scalar:
  .rgx: \>\r?\nXXX
ignore_line:
  .rgx: (?:[\ \t]*\#.*|[\ \t]*)(?=\r?\n)
list_separator:
  .rgx: \s*,\s*
literal_scalar:
  .rgx: \|\r?\nXXX
single_quoted_scalar:
  .rgx: '''((?:''''|[^''])*)'''
stream_end:
  .rgx: \r?\n?
stream_start:
  .rgx: ''
yaml_alias:
  .rgx: \*(\w+)
yaml_anchor:
  .rgx: \&(\w+)\s*
yaml_document:
  .all:
  - .any:
    - .ref: document_head
    - .ref: document_start
  - .all:
    - .ref: yaml_node
    - +max: 1
      .ref: EOL
  - +max: 1
    .ref: ignore_line
  - .any:
    - .ref: document_foot
    - .ref: document_end
yaml_node:
  .any:
  - .ref: yaml_alias
  - .all:
    - +max: 1
      .ref: yaml_prefix
    - .any:
      - .ref: flow_sequence
      - .ref: flow_mapping
      - .ref: block_sequence
      - .ref: block_mapping
      - .ref: block_scalar
yaml_prefix:
  .any:
  - .all:
    - .ref: yaml_anchor
    - +max: 1
      .ref: yaml_tag
  - .all:
    - .ref: yaml_tag
    - +max: 1
      .ref: yaml_anchor
yaml_stream:
  .all:
  - .ref: stream_start
  - +max: 1
    .all:
    - .ref: ignore_line
    - +min: 0
      -flat: 1
      .all:
      - .ref: EOL
      - .ref: ignore_line
  - +min: 0
    .all:
    - .ref: yaml_document
    - +min: 0
      .ref: ignore_line
  - .ref: stream_end
yaml_tag:
  .rgx: (\!\S*)\s*
